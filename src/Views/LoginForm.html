<!DOCTYPE html>
<html>
    <head>
		<title>Login Form</title>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
		<script type="text/javascript">
                $(document).ready(function()
                {
                    $("#twitter").click(function()
                    {
                        $.ajax({
                                type:"POST",
                                url:"/twitter",
                                cache:false,
                                dataType:"JSON"
                            
                        });
                        //alert ("twitter pressed");
                        
                    });
                });
		$(document).ready(function()
                {
                    $("#submit").click(function()
                    {
                        var name = $("#name").val();
                        var password = $("#password").val();
                        // Returns successful data submission message when the entered information is stored in database.
                        var dataString = 'username='+ name + '&password='+ password + '&authKey=testAuthKey';
                        if(name==''||password=='')
                        {
                            alert("Please Fill All Fields");
                        }
                        else
                        {
                        // AJAX Code To Submit Form.
                            $.ajax({
                                        type: "POST",
                                        url: "/api",
                                        data: dataString,
                                        cache: false,
                                        dataType:'JSON',
                                        statusCode: 
                                        {
                                            200: function()
                                            {
                                                //alert('success');
//                                                var temp = "<TABLE> <TD><TR>TEST PAGE INFORMATION: " + dataString
//                                                
                                                $.ajax({
                                                    type:"POST", 
                                                    url: "/profileCheck", 
                                                    data: name, 
                                                    cache: false, 
                                                    dataType:'JSON',
                                                statusCode:
                                                {
                                                    200: function(result)
                                                    {
                                                        alert (result['0']);
//                                                        $("loginForm").html(result);
                                                        document.getElementById("loginForm").innerHTML = result[0];
                                                        
                                                    }
                                                }});
                                                //location.href = "/profile"+'?name='+name
                                            },
                                            401: function() 
                                            {
                                                alert('not authorized');
                                                location.href = "/register"//, name, password
                                                //location.window.href = "/register";
                                            }

                                        }
                                    });       
                        }
                            return false;
                    });
                });
		</script>
		<link rel="stylesheet" type="text/css" href="C:\Users\Jared\Documents\GitHub\Project4\public\css\Site_Style_Sheet.css">
    </head>
    <body>
        <div id="mainDiv">
            <div id="loginForm">
            	<h1> Please Sign In </h1> <br />
                <p>
                    Valid Auth is: SQLite / Litepass <br /><br />
                	<label>Username: </label>
						<input id="name" type="text"/><br /><br />
                	<label>Password: </label>
						<input id="password" type="password"/><br /><br />
                	<input id="submit" type="button" value="Submit" /><br />
                        <p>
                        <button id="twitter">
                            <img src="https://g.twimg.com/dev/sites/default/files/images_documentation/sign-in-with-twitter-gray.png" alt="Sign in with Twitter">
                        </button>
<!--                        </p>
                        <p>
                        <input type="image" name="twitter" src="https://g.twimg.com/dev/sites/default/files/images_documentation/sign-in-with-twitter-gray.png" alt="twitter">
                        </p>-->
                        
            </div>
        </div>
    </body>
</html>
